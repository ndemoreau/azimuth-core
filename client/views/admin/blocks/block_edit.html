<template name="block_edit">
  <div class="block-edit-container">
    {{#if addBlock}}
      <h1>Add block</h1>

      <div class="azimuth-form-section">
        <h6>New block</h6>
        <p>Create a new block</p>
        <select class="block-template-selector" placeholder="Select A Block Type">
          <option>Select A Block Type</option>
          {{#each templates}}
            <option value="{{name}}">{{label}}</option>
          {{/each}}
        </select>
      </div>

      <div class="azimuth-form-section">
        <h6>By Tag</h6>
        <p>Add a set of blocks with a particular tag</p>
        <select class="block-tag-selector" placeholder="Select A Tag">
          <option>Select A Tag</option>
          {{#each allTags}}
            <option value="{{tag}}">{{tag}}</option>
          {{/each}}
        </select>
      </div>

      <div class="azimuth-form-section">
        <h6>By Type</h6>
        <p>Add all existing blocks of a particular type</p>
        <select class="block-type-selector" placeholder="Select A Block Type">
          <option>Select A Block Type</option>
          {{#each templates}}
            <option value="{{name}}">{{label}}</option>
          {{/each}}
        </select>
      </div>

    {{else}}
      <div>
        <h1>Edit Block {{#if blockId}}<a class="azimuth-button alert delete-block micro right">Delete Block</a>{{/if}}</h1>
      </div>
    {{/if}}

    {{#if blockFields}}
      <!-- Display block edit form -->
      <form class="block-edit-form">
        {{> tag tags=currentBlockTags}}

        {{#each blockFields}}
            {{>blockField}}
        {{/each}}

        <div class="azimuth-buttons clear">
          <a class="azimuth-button text left cancel">Cancel</a>
          <a class="azimuth-button right submit"><i class="icon icon-checkmark"></i>Save</a>
        </div>
      </form>
    {{/if}}
  </div>

  <div class="azimuth-modal-container" id="deleteBlockModal">
    <div class="azimuth-modal">
      <div class="modal-header">
        <h3>Delete Block</h3>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this block? This action cannot be undone.</p>
      </div>
      <div class="azimuth-buttons clear">
        <a class="azimuth-button text left cancel close">Cancel</a>
        <a class="azimuth-button right delete-block-confirm alert"><i class="icon icon-cross"></i>Delete</a>
      </div>
    </div>
    <div class="azimuth-modal-bg close"></div>
  </div>
</template>
<template name="blockField">
        {{#each languages}}
            {{> blockFieldForm field=.. language=this}}
        {{/each}}
</template>
<template name="blockFieldForm">
    {{> formHelper value=this.field.value type=this.field.type label=this.field.label fieldName=this.field.name language=this.language }}
</template>